<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LernCoding</title>
    <link rel="icon" type="image/png" href="image.png" />

    <style>
      body {
        margin: 0;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: #f0f2f5;
      }
      header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 60px;
        background: #4a90e2;
        color: white;
        display: flex;
        align-items: center;
        padding: 0 20px;
        z-index: 1001;
      }
      .burger {
        font-size: 28px;
        cursor: pointer;
        margin-right: 20px;
      }
      header h1 {
        margin: 0;
        font-size: 20px;
      }
      .sidebar {
        position: fixed;
        top: 60px;
        left: -100%;
        width: 270px;
        height: calc(100% - 60px);
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        box-shadow: 2px 0 15px rgba(0, 0, 0, 0.2);
        padding: 20px;
        transition: left 0.3s ease;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        z-index: 1002;
      }
      .sidebar.active {
        left: 0;
      }
      .user-info {
        margin-bottom: 20px;
      }
      .sidebar h2 {
        margin: 0 0 5px 0;
        font-size: 24px;
      }
      .sidebar .class {
        font-size: 18px;
        color: #555;
      }
      .accordion {
        list-style: none;
        padding: 0;
        margin: 20px 0;
      }
      .accordion li {
        margin-bottom: 10px;
      }
      button {
        color: black;
      }

      .accordion li button {
        width: 100%;
        background: none;
        border: none;
        text-align: left;
        font-size: 18px;
        cursor: pointer;
        padding: 10px 0;
        transition: color 0.2s;
      }
      .accordion li button:hover {
        color: #4a90e2;
      }
      .accordion li ul {
        list-style: none;
        padding-left: 20px;
        display: none;
      }
      .accordion li ul li {
        margin-bottom: 5px;
      }
      .accordion li.active ul {
        display: block;
      }
      .overlay {
        position: fixed;
        top: 60px;
        left: 0;
        width: 100%;
        height: calc(100% - 60px);
        background: rgba(0, 0, 0, 0.2);
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s;
        z-index: 1000;
      }
      .overlay.active {
        opacity: 1;
        visibility: visible;
      }
      main {
        margin-top: 60px;
        padding: 30px;
        font-size: 18px; /* Standardtext gr√∂√üer */
        line-height: 1.6; /* Zeilenh√∂he angenehmer */
      }

      button.quiz-btn {
        margin: 8px 0;
        display: block;
        padding: 12px 16px; /* gr√∂√üerer Klickbereich */
        font-size: 18px; /* gr√∂√üere Schrift */
        cursor: pointer;
      }

      input[type="text"] {
        width: 100%;
        padding: 10px;
        margin: 8px 0;
        font-size: 18px; /* gr√∂√üere Eingabe */
      }
      .feedback {
        font-weight: bold;
        margin: 12px 0;
        font-size: 18px;
      } /* gr√∂√üere Feedback-Schrift */
      code {
        background: #e0e0e0;
        padding: 2px 5px;
        border-radius: 3px;
        font-family: monospace;
      }

      /* Standard: Bild sichtbar */
      #main-content img {
        display: block;
        max-width: 100%;
        height: auto;
        margin-bottom: 20px;
      }

      /* Desktop: Bild ausblenden */
      @media (min-width: 768px) {
        #main-content img {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="burger" id="burger">&#9776;</div>
      <h1>
        <a href="index.html" style="text-decoration: none; color: white"
          >LernCoding</a
        >
      </h1>
    </header>

    <div class="overlay" id="overlay"></div>
    <div class="sidebar" id="sidebar">
      <div>
        <div class="user-info">
          <h2 id="username"></h2>
          <div class="class" id="userclass"></div>
        </div>
        <ul class="accordion">
          <li>
            <button class="accordion-toggle">F√§cher üìÅ</button>
            <ul>
              <li>
                <button class="accordion-toggle">WebDev</button>
                <ul>
                  <li>
                    <button
                      class="sidebar-link"
                      onclick="startQuiz('webdev',1)"
                    >
                      ‚Ä¢ Level 1
                    </button>
                  </li>
                  <li>
                    <button
                      class="sidebar-link"
                      onclick="startQuiz('webdev',2)"
                    >
                      ‚Ä¢ Level 2
                    </button>
                  </li>
                </ul>
              </li>
              <li>
                <button class="accordion-toggle">Python</button>
                <ul>
                  <li>
                    <button
                      class="sidebar-link"
                      onclick="startQuiz('python',1)"
                    >
                      ‚Ä¢ Level 1
                    </button>
                  </li>
                  <li>
                    <button
                      class="sidebar-link"
                      onclick="startQuiz('python',2)"
                    >
                      ‚Ä¢ Level 2
                    </button>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <main id="main-content">
      <h1>Willkommen!</h1>
      <img src="image.png" alt="" />
      <p>
        Dr√ºcke oben auf
        <span
          style="
            background-color: #7eb9fcd6;
            color: white;
            width: 30px; /* Breite */
            height: 30px; /* H√∂he = Breite ‚Üí Quadrat */
            display: inline-block;
            text-align: center;
            line-height: 30px; /* vertikale Zentrierung des Textes */
            border-radius: 0; /* keine abgerundeten Ecken */
            font-size: 14px; /* Schriftgr√∂√üe passend klein */
            border: 1px solid #5a9de0; /* dezenter Rand */
          "
          >‚ò∞</span
        >
        um eine Kategorie auszuw√§hlen.
      </p>
    </main>

    <script>
      const burger = document.getElementById("burger");
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");
      const accordions = document.querySelectorAll(".accordion-toggle");
      const mainContent = document.getElementById("main-content");
      const usernameElem = document.getElementById("username");
      const userclassElem = document.getElementById("userclass");

      // HTML escape-Funktion
      function escapeHTML(str) {
        return str
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;");
      }

      // Quiz-Daten inkl. Hints
      const quizzes = {
        webdev: {
          1: [
            {
              type: "mcq",
              question: "Was bedeutet HTML?",
              options: [
                "Hyper Text Markup Language",
                "Hotmail",
                "Home Tool Markup",
              ],
              answer: [0],
              hint: "Denke an die Sprache, mit der Webseiten strukturiert werden.",
            },
            {
              type: "tf",
              question: "<br> erzeugt einen Zeilenumbruch.",
              answer: true,
              hint: "Welches Tag wird benutzt, um Text in einer neuen Zeile darzustellen?",
            },
            {
              type: "text",
              question: "Schreibe das Tag f√ºr √úberschrift 1 auf:",
              answer: "<h1>",
              hint: "Es beginnt mit 'h' und einer Zahl, die die Ebene angibt.",
            },
            {
              type: "mcq-multi",
              question: "Welche Tags gibt es?",
              options: ["<p>", "<div>", "<link>", "<javascript>"],
              answer: [0, 1, 2],
              hint: "Einige Tags dienen zum Strukturieren und Verlinken von HTML-Seiten.",
            },
            {
              type: "mcq",
              question: "Wie erstellt man einen Link?",
              options: ["<a>", "<link>", "<href>"],
              answer: [0],
              hint: "Denke an das Tag, das Ankerpunkte auf Webseiten erstellt.",
            },
            {
              type: "tf",
              question: "<p> erstellt einen Paragraphen.",
              answer: true,
              hint: "Welches Tag wird standardm√§√üig f√ºr Textbl√∂cke genutzt?",
            },
            {
              type: "mcq-multi",
              question: "Welche HTML Elemente gibt es?",
              options: ["ul", "ol", "li", "txt"],
              answer: [0, 1, 2],
              hint: "Listen-Elemente sind Teil der Standard-HTML-Tags.",
            },
            {
              type: "text",
              question: "Schreibe das Tag f√ºr Fettgedruckten Text:",
              answer: "<b>",
              hint: "Es ist ein kurzes Tag f√ºr Bold Text.",
            },
            {
              type: "mcq",
              question: "Ein Bild f√ºgt man mit welchem Tag ein?",
              options: ["<img>", "<picture>", "<image>"],
              answer: [0],
              hint: "Das Tag ist kurz, 3 Buchstaben, zeigt ein Bild an.",
            },
            {
              type: "tf",
              question: "<div> ist ein Block-Element.",
              answer: true,
              hint: "Denke an Container, die ganze Zeilen einnehmen.",
            },
          ],
          2: [
            {
              type: "mcq",
              question: "Was macht das <head> Tag?",
              options: [
                "Enth√§lt Metadaten",
                "Zeigt Inhalt an",
                "Definiert Links",
              ],
              answer: [0],
              hint: "Daten, die nicht direkt auf der Seite sichtbar sind, werden hier gespeichert.",
            },
            {
              type: "mcq-multi",
              question: "Welche Attribute kann ein <a>-Tag haben?",
              options: ["href", "src", "target", "alt"],
              answer: [0, 2],
              hint: "Ein Link braucht die Adresse und optional, wo ge√∂ffnet wird.",
            },
            {
              type: "tf",
              question: "CSS wird in HTML direkt geschrieben.",
              answer: false,
              hint: "Es gibt externe Stylesheets.",
            },
            {
              type: "text",
              question: "Schreibe das Tag f√ºr Absatz:",
              answer: "<p>",
              hint: "Es ist ein kurzes Tag f√ºr Textabs√§tze.",
            },
            {
              type: "mcq",
              question: "Welche Tags sind Inline-Elemente?",
              options: ["<span>", "<div>", "<b>", "<section>"],
              answer: [0, 2],
              hint: "Nur Elemente, die den Textfluss nicht unterbrechen.",
            },
            {
              type: "tf",
              question: "<ul> erstellt eine ungeordnete Liste.",
              answer: true,
              hint: "Welche Art von Listen beginnen typischerweise mit Punkten?",
            },
            {
              type: "mcq-multi",
              question: "Welche Tags dienen zur Textformatierung?",
              options: ["<b>", "<i>", "<p>", "<link>"],
              answer: [0, 1],
              hint: "Tags, die Schriftarten und Stile √§ndern, nicht die Struktur.",
            },
            {
              type: "text",
              question: "Tag f√ºr horizontale Linie:",
              answer: "<hr>",
              hint: "Es ist kurz, zwei Buchstaben, trennt Inhalt visuell.",
            },
            {
              type: "mcq",
              question: "Welches Tag f√ºr Tabellenzeile?",
              options: ["<tr>", "<td>", "<table>"],
              answer: [0],
              hint: "Es ist das Tag f√ºr eine einzelne Zeile innerhalb einer Tabelle.",
            },
            {
              type: "tf",
              question: "<img> kann einen alt-Text haben.",
              answer: true,
              hint: "Hilfreich f√ºr Barrierefreiheit und wenn Bild nicht l√§dt.",
            },
          ],
        },
        python: {
          1: [
            {
              type: "mcq",
              question: "Wie beginnt man einen Kommentar in Python?",
              options: ["#", "//", "<!--"],
              answer: [0],
              hint: "Python nutzt ein einzelnes Zeichen am Zeilenanfang.",
            },
            {
              type: "tf",
              question: "Python ist eine kompilierte Sprache.",
              answer: false,
              hint: "Python wird in der Regel interpretiert.",
            },
            {
              type: "text",
              question: "Schreibe 'Hallo Welt' in Python.",
              answer: "print('Hallo Welt')",
              hint: "Welche Funktion gibt Text auf der Konsole aus?",
            },
            {
              type: "mcq-multi",
              question: "Welche Datentypen gibt es?",
              options: ["int", "str", "bool", "char"],
              answer: [0, 1, 2],
              hint: "Python kennt Ganzzahlen, Text und Wahrheitswerte.",
            },
            {
              type: "mcq",
              question: "Welches Zeichen f√ºr Multiplikation?",
              options: ["*", "x", "^"],
              answer: [0],
              hint: "Es ist das Standard-Mathematikzeichen in Python.",
            },
            {
              type: "tf",
              question: "Listen sind ver√§nderbar.",
              answer: true,
              hint: "Kann man Elemente hinzuf√ºgen oder l√∂schen?",
            },
            {
              type: "text",
              question: "Schreibe eine Variable mit Wert 5.",
              answer: "x=5",
              hint: "Zuweisung in Python erfolgt mit '='.",
            },
            {
              type: "mcq-multi",
              question: "Welche Keywords gibt es?",
              options: ["if", "for", "while", "switch"],
              answer: [0, 1, 2],
              hint: "Python kennt keine switch-case-Anweisungen.",
            },
            {
              type: "mcq",
              question: "Was gibt print() aus?",
              options: ["Text", "Variable", "Beides"],
              answer: [2],
              hint: "Kann Text und Variablen anzeigen.",
            },
            {
              type: "tf",
              question: "Funktionen werden mit def definiert.",
              answer: true,
              hint: "Wie wird eine neue Funktion in Python gestartet?",
            },
          ],
          2: [
            {
              type: "mcq-multi",
              question: "Welche Datentypen gibt es?",
              options: ["int", "str", "bool", "char"],
              answer: [0, 1, 2],
              hint: "Python hat keine 'char'-Variable.",
            },
            {
              type: "text",
              question: "Erstelle ein Dictionary mit key='a' value=1",
              answer: "{'a':1}",
              hint: "Dictionary wird mit geschweiften Klammern erstellt.",
            },
            {
              type: "mcq",
              question: "Welche Schleife wird in Python nicht genutzt?",
              options: ["for", "while", "do-while"],
              answer: [2],
              hint: "Python kennt keine do-while-Schleife.",
            },
            {
              type: "tf",
              question: "Tuple sind unver√§nderbar.",
              answer: true,
              hint: "Kann man Elemente hinzuf√ºgen oder √§ndern?",
            },
            {
              type: "text",
              question: "Erstelle eine Liste mit Werten 1,2,3",
              answer: "[1,2,3]",
              hint: "Listen werden mit eckigen Klammern geschrieben.",
            },
            {
              type: "mcq-multi",
              question: "Welche Methoden f√ºr Listen?",
              options: ["append", "pop", "remove", "add"],
              answer: [0, 1, 2],
              hint: "Drei Methoden funktionieren in Python, die vierte nicht.",
            },
            {
              type: "mcq",
              question: "Modul importieren?",
              options: ["import math", "include math", "use math"],
              answer: [0],
              hint: "Das Schl√ºsselwort in Python ist 'import'.",
            },
            {
              type: "tf",
              question: "Python benutzt Einr√ºckungen f√ºr Bl√∂cke.",
              answer: true,
              hint: "Code-Bl√∂cke werden nicht mit geschweiften Klammern markiert.",
            },
            {
              type: "text",
              question: "String 'Hallo' in Gro√übuchstaben?",
              answer: "HALLO",
              hint: "Python hat eine Methode, um Strings in Gro√übuchstaben umzuwandeln.",
            },
            {
              type: "mcq",
              question: "True or False? 5>3",
              options: ["True", "False"],
              answer: [0],
              hint: "Ist 5 gr√∂√üer als 3?",
            },
          ],
        },
      };

      // Benutzerinfo mit lokal Speicherung
      function askUserInfo() {
        let firstName =
          localStorage.getItem("firstName") ||
          prompt("Bitte deinen Vornamen eingeben:");
        let userClass =
          localStorage.getItem("userClass") ||
          prompt("Bitte deine Klasse eingeben:");
        localStorage.setItem("firstName", firstName);
        localStorage.setItem("userClass", userClass);
        usernameElem.textContent = firstName;
        userclassElem.textContent = userClass;
      }

      // Sidebar Toggle
      function toggleSidebar() {
        sidebar.classList.toggle("active");
        overlay.classList.toggle("active");
        burger.innerHTML = sidebar.classList.contains("active")
          ? "&times;"
          : "&#9776;";
      }
      burger.addEventListener("click", toggleSidebar);
      overlay.addEventListener("click", toggleSidebar);
      accordions.forEach((toggle) =>
        toggle.addEventListener("click", (e) =>
          e.target.parentElement.classList.toggle("active")
        )
      );

      let currentQuiz = null;

      // Wiederherstellung des letzten Zustands beim Laden
      function loadLastState() {
        const state = JSON.parse(localStorage.getItem("currentQuiz"));
        if (state) {
          currentQuiz = state;
          renderQuestion();
        }
      }

      function startQuiz(subject, level) {
        sidebar.classList.remove("active");
        overlay.classList.remove("active");
        burger.innerHTML = "&#9776;";
        let savedProgress = JSON.parse(
          localStorage.getItem(`${subject}-level${level}`) || "{}"
        );
        currentQuiz = {
          subject,
          level,
          index: 0,
          answers: savedProgress,
          repeatQueue: [],
        };
        saveAppState();
        renderQuestion();
      }

      // Speichern des Quizzustands
      function saveAppState() {
        if (currentQuiz)
          localStorage.setItem("currentQuiz", JSON.stringify(currentQuiz));
      }

      function renderQuestion() {
        const { subject, level, index } = currentQuiz;
        const q = quizzes[subject][level][index];
        let html = `<h2>${subject.toUpperCase()} Level ${level}</h2>`;
        html += `<p><strong>Frage ${index + 1} von ${
          quizzes[subject][level].length
        }</strong></p>`;
        html += `<p><code>${escapeHTML(q.question)}</code></p>`;
        html += `<div id="feedback" class="feedback"></div>`;

        if (q.hint) {
          html += `<button id="hintBtn" style="margin:5px;font-size:16px;cursor:pointer;">üí° Hinweis</button>`;
          html += `<div id="hintText" style="display:none;color:#555;margin-top:5px;">${escapeHTML(
            q.hint
          )}</div>`;
        }

        if (q.type === "mcq") {
          q.options.forEach((opt, i) => {
            html += `<button class="quiz-btn" onclick="checkAnswer(${i})"><code>${escapeHTML(
              opt
            )}</code></button>`;
          });
        } else if (q.type === "mcq-multi") {
          html += `<form id="mcqMultiForm">`;
          q.options.forEach((opt, i) => {
            html += `<label><input type="checkbox" name="option" value="${i}"><code>${escapeHTML(
              opt
            )}</code></label><br>`;
          });
          html += `<button style="margin-top:5px;font-size:16px;cursor:pointer;" type="button" onclick="checkMulti()">Antwort pr√ºfen</button></form>`;
        } else if (q.type === "tf") {
          html += `<button class="quiz-btn" onclick="checkAnswer(true)">Richtig</button>`;
          html += `<button class="quiz-btn" onclick="checkAnswer(false)">Falsch</button>`;
        } else if (q.type === "text") {
          html += `<input type="text" id="textAnswer" placeholder="Antwort hier..."><button onclick="checkText()">Antwort pr√ºfen</button>`;
        }

        mainContent.innerHTML = html;

        // Hint Button Event
        const hintBtn = document.getElementById("hintBtn");
        if (hintBtn) {
          hintBtn.addEventListener("click", () => {
            const hintText = document.getElementById("hintText");
            hintText.style.display =
              hintText.style.display === "none" ? "block" : "none";
          });
        }

        saveAppState();
      }

      // Pr√ºfen Funktionen
      function checkAnswer(selected) {
        const { subject, level, index } = currentQuiz;
        const q = quizzes[subject][level][index];
        const feedback = document.getElementById("feedback");
        let correct =
          q.type === "mcq"
            ? q.answer.includes(selected)
            : selected === q.answer;
        if (correct) {
          feedback.textContent = "‚úÖ";
          currentQuiz.answers[index] = true;
          setTimeout(nextQuestion, 700);
        } else {
          feedback.textContent = "‚ùå Falsch! Wiederholen.";
          if (!currentQuiz.repeatQueue.includes(index))
            currentQuiz.repeatQueue.push(index);
          currentQuiz.answers[index] = false;
          setTimeout(nextQuestion, 700);
        }
        saveAppState();
      }

      function checkMulti() {
        const { subject, level, index } = currentQuiz;
        const q = quizzes[subject][level][index];
        const selected = Array.from(
          document.querySelectorAll("input[name=option]:checked")
        ).map((i) => parseInt(i.value));
        const feedback = document.getElementById("feedback");
        const correct =
          JSON.stringify(selected.sort()) === JSON.stringify(q.answer.sort());
        if (correct) {
          feedback.textContent = "‚úÖ Richtig!";
          currentQuiz.answers[index] = true;
          setTimeout(nextQuestion, 700);
        } else {
          feedback.textContent = "‚ùå Falsch! Wiederholen.";
          if (!currentQuiz.repeatQueue.includes(index))
            currentQuiz.repeatQueue.push(index);
          currentQuiz.answers[index] = false;
          setTimeout(nextQuestion, 700);
        }
        saveAppState();
      }

      function checkText() {
        const { subject, level, index } = currentQuiz;
        const q = quizzes[subject][level][index];
        const val = document.getElementById("textAnswer").value.trim();
        const feedback = document.getElementById("feedback");
        const correct = val.toLowerCase() === q.answer.toLowerCase();
        if (correct) {
          feedback.textContent = "‚úÖ Richtig!";
          currentQuiz.answers[index] = true;
          setTimeout(nextQuestion, 700);
        } else {
          feedback.textContent = "‚ùå Falsch! Wiederholen.";
          if (!currentQuiz.repeatQueue.includes(index))
            currentQuiz.repeatQueue.push(index);
          currentQuiz.answers[index] = false;
          setTimeout(nextQuestion, 700);
        }
        saveAppState();
      }

      function nextQuestion() {
        if (currentQuiz.repeatQueue.length > 0) {
          currentQuiz.index = currentQuiz.repeatQueue.shift();
          renderQuestion();
        } else {
          const { subject, level, index } = currentQuiz;
          if (index + 1 < quizzes[subject][level].length) {
            currentQuiz.index++;
            renderQuestion();
          } else {
            mainContent.innerHTML =
              "<h2>Quiz beendet!</h2><p>Alle Fragen korrekt beantwortet.</p>";
            localStorage.removeItem("currentQuiz"); // optional
          }
        }
      }

      window.addEventListener("load", () => {
        askUserInfo();
        loadLastState();
      });
    </script>
  </body>
</html>
